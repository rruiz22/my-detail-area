<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/webp" href="/favicon.webp" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Anti-cache headers for critical updates (mobile browsers) -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Translation preload removed - i18next-http-backend handles loading automatically -->

    <title>My Detail Area (MDA) - Dealership Operations Hub</title>
    <meta name="description" content="Professional dealership operations management platform. Coordinate Sales, Service, Recon, and Car Wash departments with order tracking, notifications, and comprehensive reporting." />
    <meta name="keywords" content="dealership management, automotive operations, order tracking, vehicle detailing, dealership software" />
    <meta name="author" content="MDA Team" />

    <meta property="og:title" content="My Detail Area (MDA) - Dealership Operations Hub" />
    <meta property="og:description" content="Professional dealership operations management platform for Sales, Service, Recon, and Car Wash departments." />
    <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image" />
  </head>

  <body>
    <div id="root"></div>
    <!-- Portal dedicado para notificaciones toast (Sonner) -->
    <div id="toast-portal"></div>
    <script>
      // Polyfill for require in browser environment
      if (typeof require === 'undefined') {
        window.require = function(module) {
          // Suppress warnings for known third-party widget dependencies
          if (module === '@emotion/is-prop-valid') {
            return {}; // Silent return for MDAChat widget
          }
          console.warn(`require('${module}') called in browser - returning empty object`);
          return {};
        };
      }

      // Additional Node.js polyfills
      if (typeof process === 'undefined') {
        window.process = { env: {} };
      }

      if (typeof Buffer === 'undefined') {
        window.Buffer = {};
      }
    </script>
    <script type="module" src="/src/main.tsx"></script>

    <!-- MDAChat Live Chat Widget - Only in production -->
    <script>
      (function() {
        const hostname = window.location.hostname;
        const isLocalhost = hostname === 'localhost' || hostname === '127.0.0.1';

        if (!isLocalhost) {
          // Widget enabled in production
          console.log('üí¨ [MDAChat] Loading widget for hostname:', hostname);

          window.BeChatSettings = {
            widgetDomain: "https://dds.mydetailarea.com",
          };

          const script = document.createElement('script');
          script.src = 'https://support.mydetailarea.com/livechat-loader.js';
          script.async = true;
          script.defer = true;

          script.onload = function() {
            console.log('‚úÖ [MDAChat] Widget script loaded successfully');
          };

          script.onerror = function(error) {
            console.error('‚ùå [MDAChat] Failed to load widget script:', error);
          };

          document.body.appendChild(script);
        } else {
          console.log('üîá [DEV] MDAChat widget disabled in localhost (hostname: ' + hostname + ')');
        }
      })();
    </script>
  </body>
</html>
