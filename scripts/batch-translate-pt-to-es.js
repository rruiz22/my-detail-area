const fs = require('fs');
const path = require('path');

// Translation dictionary: Portuguese ‚Üí Spanish
const translations = {
  // Common words
  'N√£o': 'No',
  'n√£o': 'no',
  'Sim': 'S√≠',
  'sim': 's√≠',
  'voc√™': 'usted',
  'Voc√™': 'Usted',
  'tamb√©m': 'tambi√©n',
  'atrav√©s': 'a trav√©s',
  'n√∫mero': 'n√∫mero',
  'p√°gina': 'p√°gina',
  '√∫ltimo': '√∫ltimo',
  '√∫ltima': '√∫ltima',
  'pr√≥ximo': 'siguiente',
  'pr√≥xima': 'siguiente',
  'bot√£o': 'bot√≥n',
  'fun√ß√£o': 'funci√≥n',
  'c√≥digo': 'c√≥digo',
  'op√ß√£o': 'opci√≥n',
  'configura√ß√£o': 'configuraci√≥n',
  'configura√ß√µes': 'configuraciones',
  'informa√ß√£o': 'informaci√≥n',
  'informa√ß√µes': 'informaciones',
  'administra√ß√£o': 'administraci√≥n',
  'm√≥dulo': 'm√≥dulo',
  'usu√°rio': 'usuario',
  'usu√°rios': 'usuarios',
  'empregado': 'empleado',
  'empregados': 'empleados',
  'relat√≥rio': 'informe',
  'relat√≥rios': 'informes',
  'portugu√™s': 'espa√±ol',
  'conclu√≠do': 'completado',
  'est√°': 'est√°',
  'avan√ßado': 'avanzado',

  // Encoding issues (√É¬∫√É¬ß√É¬£o pattern)
  'An√É¬∫ncios': 'Anuncios',
  'an√É¬∫ncios': 'anuncios',
  'an√É¬∫ncio': 'anuncio',
  'usu√É¬°rios': 'usuarios',
  'usu√É¬°rio': 'usuario',
  'Fun√É¬ß√É¬£o': 'Funci√≥n',
  'fun√É¬ß√É¬£o': 'funci√≥n',
  'Fun√É¬ß√É¬µes': 'Funciones',
  'fun√É¬ß√É¬µes': 'funciones',
  'Concession√É¬°ria': 'Concesionaria',
  'Concession√É¬°rias': 'Concesionarias',
  'concession√É¬°ria': 'concesionaria',
  'concession√É¬°rias': 'concesionarias',
  'T√É¬≠tulo': 'T√≠tulo',
  't√É¬≠tulo': 't√≠tulo',
  'Informa√É¬ß√É¬£o': 'Informaci√≥n',
  'informa√É¬ß√É¬£o': 'informaci√≥n',
  'Informa√É¬ß√É¬µes': 'Informaciones',
  'informa√É¬ß√É¬µes': 'informaciones',
  'atualiza√É¬ß√É¬£o': 'actualizaci√≥n',
  'atualiza√É¬ß√É¬µes': 'actualizaciones',
  'a√É¬ß√É¬£o': 'acci√≥n',
  'a√É¬ß√É¬µes': 'acciones',
  'A√É¬ß√É¬µes': 'Acciones',
  'Descri√É¬ß√É¬£o': 'Descripci√≥n',
  'descri√É¬ß√É¬£o': 'descripci√≥n',
  'Endere√É¬ßo': 'Direcci√≥n',
  'endere√É¬ßo': 'direcci√≥n',
  'Posi√É¬ß√É¬£o': 'Posici√≥n',
  'posi√É¬ß√É¬£o': 'posici√≥n',
  'Organiza√É¬ß√É¬£o': 'Organizaci√≥n',
  'organiza√É¬ß√É¬£o': 'organizaci√≥n',
  'Conte√É¬∫do': 'Contenido',
  'conte√É¬∫do': 'contenido',
  'Coment√É¬°rios': 'Comentarios',
  'coment√É¬°rios': 'comentarios',
  'Voc√É¬™': 'Usted',
  'voc√É¬™': 'usted',
  'n√É¬£o': 'no',
  'N√É¬£o': 'No',
  'est√É¬°': 'est√°',
  'Est√É¬°': 'Est√°',
  'N√É¬∫mero': 'N√∫mero',
  'n√É¬∫mero': 'n√∫mero',
  'Pa√É¬≠s': 'Pa√≠s',
  'pa√É¬≠s': 'pa√≠s',
  'C√É¬≥digo': 'C√≥digo',
  'c√É¬≥digo': 'c√≥digo',
  'P√É¬°gina': 'P√°gina',
  'p√É¬°gina': 'p√°gina',
  '√É≈°ltima': '√öltima',
  '√É¬∫ltima': '√∫ltima',
  'Pr√É¬≥xima': 'Siguiente',
  'pr√É¬≥xima': 'siguiente',
  'Bot√É¬£o': 'Bot√≥n',
  'bot√É¬£o': 'bot√≥n',
  'Op√É¬ß√É¬£o': 'Opci√≥n',
  'op√É¬ß√É¬£o': 'opci√≥n',
  'Configura√É¬ß√É¬£o': 'Configuraci√≥n',
  'configura√É¬ß√É¬£o': 'configuraci√≥n',
  'Configura√É¬ß√É¬µes': 'Configuraciones',
  'configura√É¬ß√É¬µes': 'configuraciones',
  'Administra√É¬ß√É¬£o': 'Administraci√≥n',
  'administra√É¬ß√É¬£o': 'administraci√≥n',
  'M√É¬≥dulo': 'M√≥dulo',
  'm√É¬≥dulo': 'm√≥dulo',
  'Usu√É¬°rio': 'Usuario',
  'Usu√É¬°rios': 'Usuarios',
  'Relat√É¬≥rio': 'Informe',
  'Relat√É¬≥rios': 'Informes',
  'relat√É¬≥rios': 'informes',
  'Portugu√É¬™s': 'Espa√±ol',
  'portugu√É¬™s': 'espa√±ol',
  'Conclu√É¬≠do': 'Completado',
  'conclu√É¬≠do': 'completado',
  'Avan√É¬ßado': 'Avanzado',
  'avan√É¬ßado': 'avanzado',
  'Tamb√É¬©m': 'Tambi√©n',
  'tamb√É¬©m': 'tambi√©n',
  'Atrav√É¬©s': 'A trav√©s',
  'atrav√É¬©s': 'a trav√©s',

  // Portuguese phrases ‚Üí Spanish
  'Digite o': 'Ingrese el',
  'Digite a': 'Ingrese la',
  'Selecione uma': 'Seleccione una',
  'Selecione um': 'Seleccione un',
  'Criar': 'Crear',
  'Editar': 'Editar',
  'Excluir': 'Eliminar',
  'Cancelar': 'Cancelar',
  'Salvar': 'Guardar',
  'Enviar': 'Enviar',
  'Voltar': 'Volver',
  'Continuar': 'Continuar',
  'Finalizar': 'Finalizar',
  'Pesquisar': 'Buscar',
  'Filtrar': 'Filtrar',
  'Todos': 'Todos',
  'Todas': 'Todas',
  'Nenhum': 'Ninguno',
  'Nenhuma': 'Ninguna',
  'Carregando': 'Cargando',
  'Aguardando': 'Esperando',
  'Processando': 'Procesando',
  'Completo': 'Completo',
  'Pendente': 'Pendiente',
  'Ativo': 'Activo',
  'Inativo': 'Inactivo',
  'Ativado': 'Activado',
  'Desativado': 'Desactivado',
  'Habilitado': 'Habilitado',
  'Desabilitado': 'Deshabilitado',

  // Common form labels
  'Nome': 'Nombre',
  'E-mail': 'Correo Electr√≥nico',
  'Telefone': 'Tel√©fono',
  'Cidade': 'Ciudad',
  'Estado': 'Estado',
  'Empresa': 'Empresa',
  'Departamento': 'Departamento',
  'Mensagem': 'Mensaje',
  'Assunto': 'Asunto',
  'Categoria': 'Categor√≠a',
  'Tipo': 'Tipo',
  'Status': 'Estado',
  'Prioridade': 'Prioridad',
  'Tags': 'Etiquetas',
  'Senha': 'Contrase√±a',
  'Confirmar Senha': 'Confirmar Contrase√±a',
  'Primeiro Nome': 'Nombre',
  'Sobrenome': 'Apellido',
  'Nome Completo': 'Nombre Completo',

  // Time-related
  'Data': 'Fecha',
  'Hora': 'Hora',
  'Notas': 'Notas',
  '√É\\u00baltima atualiza√É\\u00a7√É\\u00a3o': '√öltima actualizaci√≥n',
  '√É≈°ltima atualiza√É¬ß√É¬£o': '√öltima actualizaci√≥n',
  'Data de In√É¬≠cio': 'Fecha de Inicio',
  'Data de T√É¬©rmino': 'Fecha de Finalizaci√≥n',

  // Portuguese common verbs ‚Üí Spanish
  'h√É¬°': 'hay',
  'H√É¬°': 'Hay',
  'Tem certeza': '¬øEst√° seguro',
  'tem certeza': 'est√° seguro',
  'n√É¬£o pode ser': 'no se puede',
  'pode ser': 'puede ser',
  'foi': 'fue',
  'foram': 'fueron',
  'ser√É¬°': 'ser√°',
  'ser√É¬£o': 'ser√°n',

  // Success/Error messages
  'com sucesso': 'exitosamente',
  'Sucesso': '√âxito',
  'Erro': 'Error',
  'Aviso': 'Advertencia',
  'Alerta': 'Alerta'
};

function translateContent(content) {
  let translated = content;

  // Apply all translations
  for (const [pt, es] of Object.entries(translations)) {
    // Use word boundaries where appropriate
    const regex = new RegExp(pt.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
    translated = translated.replace(regex, es);
  }

  return translated;
}

function translateFile(enPath, esPath) {
  try {
    const enContent = fs.readFileSync(enPath, 'utf8');
    const enJson = JSON.parse(enContent);

    // Read existing ES file if it exists
    let esJson = {};
    if (fs.existsSync(esPath)) {
      const esContent = fs.readFileSync(esPath, 'utf8');
      esJson = JSON.parse(esContent);
    }

    // Recursively translate JSON
    function translateJson(enObj, esObj = {}) {
      const result = {};

      for (const [key, value] of Object.entries(enObj)) {
        if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
          result[key] = translateJson(value, esObj[key] || {});
        } else if (typeof value === 'string') {
          // Check if ES already has a translation that doesn't contain Portuguese
          const existingEs = esObj[key];
          const hasPortuguese = existingEs && /[√£√µ√¢√™√¥√°√©√≠√≥√∫√†√®√¨√≤√π√ß√É√ï√Ç√ä√î√Å√â√ç√ì√ö√Ä√à√å√í√ô√á]|\\b(n√£o|voc√™|configura√ß√µes|tamb√©m|atrav√©s|fun√ß√£o|c√≥digo|p√°gina|op√ß√£o|avan√ßado|√∫ltima|bot√£o|pr√≥xima|portugu√™s|conclu√≠do|informa√ß√£o|administra√ß√£o|configura√ß√£o|m√≥dulo|usu√°rio|empregado|relat√≥rios|n√∫mero|est√°)\\b/i.test(existingEs);

          if (existingEs && !hasPortuguese) {
            // Keep existing good Spanish translation
            result[key] = existingEs;
          } else {
            // Translate from English or fix Portuguese
            result[key] = translateFromEnglish(value);
          }
        } else {
          result[key] = value;
        }
      }

      return result;
    }

    const translatedJson = translateJson(enJson, esJson);
    const translatedContent = JSON.stringify(translatedJson, null, 2) + '\n';

    fs.writeFileSync(esPath, translatedContent, 'utf8');
    return true;
  } catch (error) {
    console.error(`Error translating ${esPath}:`, error.message);
    return false;
  }
}

function translateFromEnglish(text) {
  // English to Spanish translations
  const enToEs = {
    'Loading': 'Cargando',
    'Search': 'Buscar',
    'Filter': 'Filtrar',
    'Create': 'Crear',
    'Edit': 'Editar',
    'Delete': 'Eliminar',
    'Save': 'Guardar',
    'Cancel': 'Cancelar',
    'Submit': 'Enviar',
    'Back': 'Volver',
    'Next': 'Siguiente',
    'Previous': 'Anterior',
    'Continue': 'Continuar',
    'Finish': 'Finalizar',
    'Close': 'Cerrar',
    'Open': 'Abrir',
    'View': 'Ver',
    'Download': 'Descargar',
    'Upload': 'Subir',
    'Export': 'Exportar',
    'Import': 'Importar',
    'Print': 'Imprimir',
    'Refresh': 'Actualizar',
    'Reload': 'Recargar',
    'Reset': 'Restablecer',
    'Clear': 'Limpiar',
    'Apply': 'Aplicar',
    'Confirm': 'Confirmar',
    'Yes': 'S√≠',
    'No': 'No',
    'OK': 'Aceptar',
    'Settings': 'Configuraci√≥n',
    'Preferences': 'Preferencias',
    'Options': 'Opciones',
    'Help': 'Ayuda',
    'About': 'Acerca de',
    'Contact': 'Contacto',
    'Support': 'Soporte',
    'Feedback': 'Comentarios',
    'Report': 'Informe',
    'Analytics': 'Anal√≠ticas',
    'Dashboard': 'Panel de Control',
    'Home': 'Inicio',
    'Profile': 'Perfil',
    'Account': 'Cuenta',
    'Login': 'Iniciar Sesi√≥n',
    'Logout': 'Cerrar Sesi√≥n',
    'Sign In': 'Iniciar Sesi√≥n',
    'Sign Out': 'Cerrar Sesi√≥n',
    'Sign Up': 'Registrarse',
    'Register': 'Registrarse',
    'Username': 'Nombre de Usuario',
    'Password': 'Contrase√±a',
    'Email': 'Correo Electr√≥nico',
    'Phone': 'Tel√©fono',
    'Name': 'Nombre',
    'First Name': 'Nombre',
    'Last Name': 'Apellido',
    'Full Name': 'Nombre Completo',
    'Address': 'Direcci√≥n',
    'City': 'Ciudad',
    'State': 'Estado',
    'Country': 'Pa√≠s',
    'Zip Code': 'C√≥digo Postal',
    'Postal Code': 'C√≥digo Postal',
    'Date': 'Fecha',
    'Time': 'Hora',
    'Description': 'Descripci√≥n',
    'Notes': 'Notas',
    'Comments': 'Comentarios',
    'Message': 'Mensaje',
    'Subject': 'Asunto',
    'Title': 'T√≠tulo',
    'Category': 'Categor√≠a',
    'Type': 'Tipo',
    'Status': 'Estado',
    'Priority': 'Prioridad',
    'Tags': 'Etiquetas',
    'Company': 'Empresa',
    'Organization': 'Organizaci√≥n',
    'Department': 'Departamento',
    'Position': 'Posici√≥n',
    'Role': 'Rol',
    'Active': 'Activo',
    'Inactive': 'Inactivo',
    'Enabled': 'Habilitado',
    'Disabled': 'Deshabilitado',
    'Pending': 'Pendiente',
    'In Progress': 'En Progreso',
    'Completed': 'Completado',
    'Cancelled': 'Cancelado',
    'Failed': 'Fallido',
    'Success': '√âxito',
    'Error': 'Error',
    'Warning': 'Advertencia',
    'Info': 'Informaci√≥n',
    'Alert': 'Alerta',
    'Notification': 'Notificaci√≥n',
    'Notifications': 'Notificaciones',
    'All': 'Todos',
    'None': 'Ninguno',
    'Total': 'Total',
    'Count': 'Conteo',
    'Results': 'Resultados',
    'No results': 'Sin resultados',
    'No data': 'Sin datos',
    'Loading...': 'Cargando...',
    'Please wait': 'Por favor espere',
    'Processing': 'Procesando',
    'Saving': 'Guardando',
    'Deleting': 'Eliminando',
    'Updating': 'Actualizando',
    'Created': 'Creado',
    'Updated': 'Actualizado',
    'Deleted': 'Eliminado',
    'Saved': 'Guardado',
    'Failed to': 'Error al',
    'successfully': 'exitosamente',
    'Are you sure': '¬øEst√° seguro',
    'This action cannot be undone': 'Esta acci√≥n no se puede deshacer',
    'Required': 'Requerido',
    'Optional': 'Opcional',
    'Select': 'Seleccionar',
    'Choose': 'Elegir',
    'Enter': 'Ingresar',
    'Search...': 'Buscar...',
    'Filter by': 'Filtrar por',
    'Sort by': 'Ordenar por',
    'Show': 'Mostrar',
    'Hide': 'Ocultar',
    'Expand': 'Expandir',
    'Collapse': 'Contraer',
    'More': 'M√°s',
    'Less': 'Menos',
    'View all': 'Ver todo',
    'View more': 'Ver m√°s',
    'View less': 'Ver menos',
    'Show more': 'Mostrar m√°s',
    'Show less': 'Mostrar menos',
    'Load more': 'Cargar m√°s',
    'Go to': 'Ir a',
    'Go back': 'Volver',
    'Go home': 'Ir al inicio',
    'Copy': 'Copiar',
    'Paste': 'Pegar',
    'Cut': 'Cortar',
    'Undo': 'Deshacer',
    'Redo': 'Rehacer',
    'Duplicate': 'Duplicar',
    'Share': 'Compartir',
    'Send': 'Enviar',
    'Receive': 'Recibir',
    'Add': 'Agregar',
    'Remove': 'Quitar',
    'Insert': 'Insertar',
    'Replace': 'Reemplazar',
    'Move': 'Mover',
    'Rename': 'Renombrar',
    'Archive': 'Archivar',
    'Restore': 'Restaurar',
    'Recover': 'Recuperar',
    'Retry': 'Reintentar',
    'Resume': 'Reanudar',
    'Pause': 'Pausar',
    'Stop': 'Detener',
    'Start': 'Iniciar',
    'Restart': 'Reiniciar',
    'Enable': 'Habilitar',
    'Disable': 'Deshabilitar',
    'Activate': 'Activar',
    'Deactivate': 'Desactivar',
    'Lock': 'Bloquear',
    'Unlock': 'Desbloquear',
    'Connect': 'Conectar',
    'Disconnect': 'Desconectar',
    'Sync': 'Sincronizar',
    'Refresh': 'Actualizar',
    'Update': 'Actualizar',
    'Upgrade': 'Actualizar',
    'Install': 'Instalar',
    'Uninstall': 'Desinstalar',
    'Configure': 'Configurar',
    'Customize': 'Personalizar',
    'Manage': 'Gestionar',
    'Administer': 'Administrar',
    'Monitor': 'Monitorear',
    'Track': 'Rastrear',
    'Analyze': 'Analizar',
    'Review': 'Revisar',
    'Approve': 'Aprobar',
    'Reject': 'Rechazar',
    'Accept': 'Aceptar',
    'Decline': 'Rechazar',
    'Assign': 'Asignar',
    'Unassign': 'Desasignar',
    'Schedule': 'Programar',
    'Reschedule': 'Reprogramar',
    'Book': 'Reservar',
    'Reserve': 'Reservar',
    'Request': 'Solicitar',
    'Order': 'Ordenar',
    'Purchase': 'Comprar',
    'Sell': 'Vender',
    'Buy': 'Comprar',
    'Pay': 'Pagar',
    'Refund': 'Reembolsar',
    'Invoice': 'Factura',
    'Receipt': 'Recibo',
    'Quote': 'Cotizaci√≥n',
    'Estimate': 'Estimaci√≥n',
    'Discount': 'Descuento',
    'Tax': 'Impuesto',
    'Shipping': 'Env√≠o',
    'Delivery': 'Entrega',
    'Pickup': 'Recogida',
    'Return': 'Devolver',
    'Exchange': 'Intercambiar',
    'Warranty': 'Garant√≠a',
    'Insurance': 'Seguro',
    'Contract': 'Contrato',
    'Agreement': 'Acuerdo',
    'Terms': 'T√©rminos',
    'Conditions': 'Condiciones',
    'Policy': 'Pol√≠tica',
    'Privacy': 'Privacidad',
    'Security': 'Seguridad',
    'Access': 'Acceso',
    'Permission': 'Permiso',
    'Permissions': 'Permisos',
    'Admin': 'Administrador',
    'Administrator': 'Administrador',
    'User': 'Usuario',
    'Users': 'Usuarios',
    'Team': 'Equipo',
    'Group': 'Grupo',
    'Member': 'Miembro',
    'Owner': 'Propietario',
    'Manager': 'Gerente',
    'Employee': 'Empleado',
    'Customer': 'Cliente',
    'Client': 'Cliente',
    'Supplier': 'Proveedor',
    'Vendor': 'Proveedor',
    'Partner': 'Socio',
    'Dealer': 'Concesionario',
    'Dealership': 'Concesionaria',
    'Vehicle': 'Veh√≠culo',
    'Car': 'Auto',
    'Order': 'Orden',
    'Orders': '√ìrdenes',
    'Service': 'Servicio',
    'Sales': 'Ventas',
    'Recon': 'Reacondicionamiento',
    'Reconditioning': 'Reacondicionamiento',
    'Car Wash': 'Lavado de Autos',
    'Detail': 'Detalle',
    'Inventory': 'Inventario',
    'Stock': 'Stock',
    'Product': 'Producto',
    'Products': 'Productos',
    'Item': 'Art√≠culo',
    'Items': 'Art√≠culos',
    'Task': 'Tarea',
    'Tasks': 'Tareas',
    'Project': 'Proyecto',
    'Projects': 'Proyectos',
    'Workflow': 'Flujo de Trabajo',
    'Process': 'Proceso',
    'Procedure': 'Procedimiento',
    'Step': 'Paso',
    'Phase': 'Fase',
    'Stage': 'Etapa',
    'Level': 'Nivel',
    'Layer': 'Capa',
    'Module': 'M√≥dulo',
    'Component': 'Componente',
    'Feature': 'Caracter√≠stica',
    'Function': 'Funci√≥n',
    'Tool': 'Herramienta',
    'Widget': 'Widget',
    'Plugin': 'Plugin',
    'Extension': 'Extensi√≥n',
    'Integration': 'Integraci√≥n',
    'API': 'API',
    'Database': 'Base de Datos',
    'Server': 'Servidor',
    'Client': 'Cliente',
    'Browser': 'Navegador',
    'App': 'Aplicaci√≥n',
    'Application': 'Aplicaci√≥n',
    'Platform': 'Plataforma',
    'System': 'Sistema',
    'Network': 'Red',
    'Cloud': 'Nube',
    'Storage': 'Almacenamiento',
    'File': 'Archivo',
    'Files': 'Archivos',
    'Folder': 'Carpeta',
    'Folders': 'Carpetas',
    'Document': 'Documento',
    'Documents': 'Documentos',
    'Image': 'Imagen',
    'Images': 'Im√°genes',
    'Video': 'Video',
    'Videos': 'Videos',
    'Audio': 'Audio',
    'Attachment': 'Adjunto',
    'Attachments': 'Adjuntos',
    'Version': 'Versi√≥n',
    'Revision': 'Revisi√≥n',
    'Change': 'Cambio',
    'Changes': 'Cambios',
    'Log': 'Registro',
    'Logs': 'Registros',
    'History': 'Historial',
    'Activity': 'Actividad',
    'Timeline': 'L√≠nea de Tiempo',
    'Calendar': 'Calendario',
    'Event': 'Evento',
    'Events': 'Eventos',
    'Meeting': 'Reuni√≥n',
    'Appointment': 'Cita',
    'Reminder': 'Recordatorio',
    'Deadline': 'Fecha L√≠mite',
    'Due Date': 'Fecha de Vencimiento',
    'Start Date': 'Fecha de Inicio',
    'End Date': 'Fecha de Finalizaci√≥n',
    'Created Date': 'Fecha de Creaci√≥n',
    'Modified Date': 'Fecha de Modificaci√≥n',
    'Last Updated': '√öltima Actualizaci√≥n',
    'Timestamp': 'Marca de Tiempo',
    'Duration': 'Duraci√≥n',
    'Interval': 'Intervalo',
    'Frequency': 'Frecuencia',
    'Daily': 'Diario',
    'Weekly': 'Semanal',
    'Monthly': 'Mensual',
    'Yearly': 'Anual',
    'Today': 'Hoy',
    'Yesterday': 'Ayer',
    'Tomorrow': 'Ma√±ana',
    'This Week': 'Esta Semana',
    'Last Week': 'Semana Pasada',
    'Next Week': 'Pr√≥xima Semana',
    'This Month': 'Este Mes',
    'Last Month': 'Mes Pasado',
    'Next Month': 'Pr√≥ximo Mes',
    'This Year': 'Este A√±o',
    'Last Year': 'A√±o Pasado',
    'Next Year': 'Pr√≥ximo A√±o',
    'Never': 'Nunca',
    'Always': 'Siempre',
    'Sometimes': 'A veces',
    'Often': 'A menudo',
    'Rarely': 'Raramente',
    'Frequently': 'Frecuentemente',
    'Occasionally': 'Ocasionalmente',
    'Normal': 'Normal',
    'High': 'Alta',
    'Low': 'Baja',
    'Medium': 'Media',
    'Urgent': 'Urgente',
    'Critical': 'Cr√≠tico',
    'Important': 'Importante',
    'Public': 'P√∫blico',
    'Private': 'Privado',
    'Shared': 'Compartido',
    'Personal': 'Personal',
    'Business': 'Negocios',
    'Work': 'Trabajo',
    'General': 'General',
    'Specific': 'Espec√≠fico',
    'Custom': 'Personalizado',
    'Default': 'Predeterminado',
    'Standard': 'Est√°ndar',
    'Advanced': 'Avanzado',
    'Basic': 'B√°sico',
    'Simple': 'Simple',
    'Complex': 'Complejo',
    'Easy': 'F√°cil',
    'Difficult': 'Dif√≠cil',
    'Quick': 'R√°pido',
    'Fast': 'R√°pido',
    'Slow': 'Lento',
    'New': 'Nuevo',
    'Old': 'Antiguo',
    'Recent': 'Reciente',
    'Latest': '√öltimo',
    'Current': 'Actual',
    'Previous': 'Anterior',
    'Upcoming': 'Pr√≥ximo',
    'Future': 'Futuro',
    'Past': 'Pasado',
    'Present': 'Presente',
    'First': 'Primero',
    'Last': '√öltimo',
    'Before': 'Antes',
    'After': 'Despu√©s',
    'During': 'Durante',
    'Above': 'Arriba',
    'Below': 'Abajo',
    'Left': 'Izquierda',
    'Right': 'Derecha',
    'Top': 'Superior',
    'Bottom': 'Inferior',
    'Center': 'Centro',
    'Side': 'Lado',
    'Front': 'Frente',
    'Back': 'Atr√°s',
    'Inside': 'Dentro',
    'Outside': 'Fuera',
    'Internal': 'Interno',
    'External': 'Externo',
    'Online': 'En l√≠nea',
    'Offline': 'Fuera de l√≠nea',
    'Connected': 'Conectado',
    'Disconnected': 'Desconectado',
    'Available': 'Disponible',
    'Unavailable': 'No disponible',
    'Busy': 'Ocupado',
    'Away': 'Ausente',
    'Invisible': 'Invisible',
    'Visible': 'Visible',
    'Hidden': 'Oculto',
    'Shown': 'Mostrado',
    'Displayed': 'Mostrado',
    'Collapsed': 'Contra√≠do',
    'Expanded': 'Expandido',
    'Minimized': 'Minimizado',
    'Maximized': 'Maximizado',
    'Full': 'Completo',
    'Empty': 'Vac√≠o',
    'Partial': 'Parcial',
    'Complete': 'Completo',
    'Incomplete': 'Incompleto',
    'Finished': 'Finalizado',
    'Unfinished': 'Inacabado',
    'Valid': 'V√°lido',
    'Invalid': 'Inv√°lido',
    'Correct': 'Correcto',
    'Incorrect': 'Incorrecto',
    'True': 'Verdadero',
    'False': 'Falso',
    'On': 'Encendido',
    'Off': 'Apagado',
    'Up': 'Arriba',
    'Down': 'Abajo',
    'In': 'Dentro',
    'Out': 'Fuera',
    'Over': 'Sobre',
    'Under': 'Debajo',
    'With': 'Con',
    'Without': 'Sin',
    'And': 'Y',
    'Or': 'O',
    'Not': 'No',
    'If': 'Si',
    'Then': 'Entonces',
    'Else': 'Si no',
    'When': 'Cuando',
    'Where': 'D√≥nde',
    'Who': 'Qui√©n',
    'What': 'Qu√©',
    'Why': 'Por qu√©',
    'How': 'C√≥mo',
    'Which': 'Cu√°l'
  };

  let translated = text;

  // Apply translations
  for (const [en, es] of Object.entries(enToEs)) {
    const regex = new RegExp(`\\b${en.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, 'g');
    translated = translated.replace(regex, es);
  }

  // Apply Portuguese fixes
  translated = translateContent(translated);

  return translated;
}

// Main execution
const enDir = 'public/translations/en';
const esDir = 'public/translations/es';

const files = fs.readdirSync(esDir).filter(f => f.endsWith('.json'));
const portuguesePattern = /[√£√µ√¢√™√¥√°√©√≠√≥√∫√†√®√¨√≤√π√ß√É√ï√Ç√ä√î√Å√â√ç√ì√ö√Ä√à√å√í√ô√á]|\\b(n√£o|voc√™|configura√ß√µes|tamb√©m|atrav√©s|fun√ß√£o|c√≥digo|p√°gina|op√ß√£o|avan√ßado|√∫ltima|bot√£o|pr√≥xima|portugu√™s|conclu√≠do|informa√ß√£o|administra√ß√£o|configura√ß√£o|m√≥dulo|usu√°rio|empregado|relat√≥rios|n√∫mero|est√°)\\b/i;

let successCount = 0;
let failCount = 0;

console.log('Starting batch translation...\n');

files.forEach(file => {
  const esPath = path.join(esDir, file);
  const content = fs.readFileSync(esPath, 'utf8');

  if (portuguesePattern.test(content)) {
    const enPath = path.join(enDir, file);

    if (fs.existsSync(enPath)) {
      const success = translateFile(enPath, esPath);
      if (success) {
        console.log(`‚úÖ ${file}`);
        successCount++;
      } else {
        console.log(`‚ùå ${file}`);
        failCount++;
      }
    } else {
      console.log(`‚ö†Ô∏è  ${file} (EN file not found)`);
      failCount++;
    }
  }
});

console.log(`\n--- Translation Complete ---`);
console.log(`‚úÖ Successful: ${successCount}`);
console.log(`‚ùå Failed: ${failCount}`);
console.log(`üìä Total processed: ${successCount + failCount}`);
